angular.module("newborn",[]),angular.module("newborn").controller("mainCtrl",function(){}),angular.module("newborn").factory("assessmentService",["assessmentsArray","statesArray",function(a,b){function c(a){return _(a).pluck("selected").pluck("score").reduce(function(a,b){return a+b},0)}return{getDefaultAssessment:function(){var d=_(a).pluck("type").map(function(a,b){return{type:a,selected:{score:0,option:0,group:b}}}).value();return d.getTotalScore=function(){return c(this)},d.getState=function(){var a=c(this);return b[a]},d.getTransportingInfo=function(){var a=c(this);return a>8?{level:2,text:"Не транспортабелен, снизить оценку до 8 баллов"}:a>0?{level:0,text:"Транспортабелен"}:{}},d.getRecommendations=function(){var b=_(this).map(function(b){var c=b.selected.group,d=b.selected.score,e=b.selected.option;return{text:a[c].labels[d][e].recommendation,type:a[c].type,level:parseInt(d)}}).filter(function(a){return""!==a.text}).value();return b},d}}}]),angular.module("newborn").constant("assessmentsArray",[{type:"Центральная нервная система",typeShort:"ЦНС",labels:[[{text:"Нормальные рефелексы, нормальный тонус",recommendation:""}],[{text:"Мышечная гипотония",recommendation:"Патогенетическое лечение"},{text:"Гиподинамия",recommendation:"Патогенетическое лечение"},{text:"Гипорефлексия",recommendation:"Патогенетическое лечение"},{text:"Вялая реакция на осмотр",recommendation:"Патогенетическое лечение"}],[{text:"Отсутствие сознания",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Мышечная атония",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Адинамия",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Арефлексия",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Судороги",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"}]]},{type:"Дыхание",typeShort:"Д",labels:[[{text:"Обходится без кислорода",recommendation:""}],[{text:"Нуждается в кислороде через кислородную маску",recommendation:"Поставить кислородную маску"},{text:"Нуждается в кислороде через назальную канюлю",recommendation:"Поставить назальную канюлю"}],[{text:"Нуждается в ИВЛ",recommendation:"Подобрать параметры ИВЛ"},{text:"Нуждается в CPAP через назальные канюли",recommendation:"Подобрать параметры CPAP"},{text:"Находится на спонтанном дыхании с повышенным давлением на выдохе через интубационную трубку",recommendation:"Проводить ИВЛ через интубационную трубку мешком Амбу при отсутствии аппаратов ИВЛ и CPAP"}]]},{type:"Сердечно-сосудистая система",typeShort:"ССС",labels:[[{text:"Нормальные ЧСС и АД",recommendation:""}],[{text:"Умеренная тахикардия (160-170 уд./мин.)",recommendation:"Провести УЗИ сердца, ЭКГ"}],[{text:"Выраженная брадикардия (<100 уд./мин.)",recommendation:"Исключить обтурацию интубационной трубки; расширенная диагностическая программа (ОАК, УЗИ сердца, ЭКГ); возможно — реанимационные мероприятия"},{text:"Выраженная тахикардия (>170 уд./мин.)",recommendation:"Расширить диагностическую программу (обследовать на инфекции)"},{text:"Артериальная гипотония",recommendation:"Ввести вазотоники (допамин, норадреналин, адреналин); восстановить ОЦК"}]]},{type:"Печень",typeShort:"П",labels:[[{text:"Не увеличена",recommendation:""}],[{text:"Увеличена менее чем на 2 см",recommendation:"Провести УЗИ печени, печеночные пробы; патогенетическое лечение"}],[{text:"Увеличена более чем на 2 см",recommendation:"Провести УЗИ печени, печеночные пробы; патогенетическое лечение"}]]},{type:"Мочевыделительная система",typeShort:"МВС",labels:[[{text:"Нормальный почасовой диурез",recommendation:""}],[{text:"Олигоурия",recommendation:"Нормализовать ОЦК, АД; расширить диагностическую программу (ОАМ, УЗИ почек)"}],[{text:"Анурия",recommendation:"Катетеризация мочевого пузыря; инфузионная терапия для восстановления АД; улучшить почечный кровоток; расширить диагностическую программу (ОАМ, УЗИ почек)"},{text:"Гематурия",recommendation:"Инфузионная терапия; антибактериальная терапия; трансфузия препаратов крови; расширить диагностическую программу (ОАМ, исследование гемостаза, УЗИ почек)"}]]},{type:"Кожа",typeShort:"К",labels:[[{text:"Нормальная окраска кожи",recommendation:""}],[{text:"Умеренная бледность с периоральным и акроцианозом",recommendation:"Расширить диагностическую программу (ОАК, контроль АД); патогенетическое лечение"}],[{text:"Выраженная желтуха",recommendation:"Расширить диагностическую программу (ОАК, группа/резус, биохимический анализ крови, УЗИ печени); поставить лампу фототерапии или провести ЗПК"},{text:"Выраженная бледность",recommendation:"Расширить диагностическую программу (ОАК, группа/резус); восстановление ОЦК, возможно - трансфузия препаратов крови"},{text:"Цианоз",recommendation:"Расширить диагностическую программу (проверить проходимость носовых ходов, рентген органов грудной клетки, УЗИ сердца, НСГ); наладить адекватную оксигенацию"},{text:"Кровоизлияния диапедезного характера",recommendation:"Расширить диагностическую программу (ОАК, исследовать систему гемостаза); трансфузия препаратов крови; гемостатические препараты"}]]},{type:"Температура тела",typeShort:"T",labels:[[{text:"Норма (36,5 — 37,5°C)",recommendation:""}],[{text:"Умеренная гипотермия (36,0 — 36,4°C)",recommendation:"Положить в кювез или на стол лучистого тепла; принудительное пошаговое согревание (с разницей температуры тела и окружающей среды в 1,5°C); довести температуру до 36,6°C; перейти на сервоконтроль температуры ребенка"}],[{text:"Гипертермия (>37,5°C)",recommendation:"Выключить источник обогрева, распеленать ребенка; При t > 38°C - поставить жаропонижающие свечи с парацетамолом"},{text:"Выраженная гипотермия (<36,0°C)",recommendation:"Положить в кювез или на стол лучистого тепла; принудительное пошаговое согревание (с разницей температуры тела и окружающей среды в 1,5°C); довести температуру до 36,6°C; перейти на сервоконтроль температуры ребенка"}]]}]),angular.module("newborn").factory("colorService",function(){return{getScoreClass:function(a){return 0===a?"success":1===a?"warning":"danger"}}}),angular.module("newborn").constant("statesArray",[{state:"Нормальное",className:"success"},{state:"Среднетяжелое",className:"info"},{state:"Среднетяжелое",className:"info"},{state:"Тяжелое",className:"primary"},{state:"Тяжелое",className:"primary"},{state:"Тяжелое",className:"primary"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"}]),angular.module("newborn").directive("assessmentCategory",["colorService",function(a){return{restrict:"E",replace:!0,templateUrl:"./templates/assessmentCategory.html",scope:{assessmentCategory:"=",categoryModel:"="},controller:["$scope",function(b){b.getScoreClass=a.getScoreClass,b.getRadioValue=function(a,c){return{group:b.categoryModel.group,score:a,option:c}},b.click=function(a,c){b.categoryModel.score=a,b.categoryModel.option=c},b.active=function(a,c){var d=a===b.categoryModel.score&&c===b.categoryModel.option;return d?"active":""}}]}}]),angular.module("newborn").directive("assessmentResults",["assessmentService","colorService","assessmentsArray",function(a,b,c){return{scope:{assessment:"="},templateUrl:"./templates/assessmentResults.html",restrict:"E",replace:!0,controller:["$scope",function(a){a.getScoreClass=b.getScoreClass,a.assessmentLabels=c}]}}]),angular.module("newborn").directive("assessmentState",function(){return{scope:{assessment:"="},restrict:"E",replace:!0,template:"<div>{{assessment.getState().state}} состояние</div>"}}),angular.module("newborn").directive("assessmentTable",["assessmentService","assessmentsArray",function(a,b){return{scope:{assessment:"="},templateUrl:"./templates/assessmentTable.html",replace:!0,restrict:"E",controller:["$scope",function(c){c.assessmentLabels=b,c.assessment=c.assessment||a.getDefaultAssessment()}]}}]),angular.module("newborn").directive("recommendationList",["assessmentService","colorService",function(a,b){return{scope:{assessment:"="},restrict:"E",replace:!0,templateUrl:"./templates/recommendationList.html",controller:["$scope",function(a){a.$watch("assessment",function(b){a.recommendations=b.getRecommendations()},!0),a.getScoreClass=b.getScoreClass}]}}]),angular.module("newborn").directive("stateFooter",function(){return{templateUrl:"./templates/stateFooter.html",restrict:"E",replace:!0,scope:{assessment:"="}}}),angular.module("newborn").directive("stateHeader",["$window",function(a){return{restrict:"E",replace:!0,templateUrl:"./templates/stateHeader.html",scope:{assessment:"="},link:function(b,c){a.onscroll=function(){var a=40,b=window.pageYOffset||document.documentElement.scrollTop;b>=a?c.addClass("shrinked"):c.removeClass("shrinked")}}}}]),angular.module("newborn").directive("transportingState",function(){return{restrict:"E",replace:!0,template:"<div>{{assessment.getTransportingInfo().text}}</div>",scope:{assessment:"="}}});