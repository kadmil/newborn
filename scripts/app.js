angular.module("newborn",["ui.bootstrap"]),angular.module("newborn").controller("mainCtrl",["$scope","assessmentService","colorService",function(a,b,c){a.assessmentLabels=b.assessments,a.totalScore=0,a.getScoreClass=c.getScoreClass,a.$watch("assessment",function(c){a.transporting=b.getTransportingInfo(c),a.totalScore=b.getAssessmentScore(c);var d=b.getState(c);a.totalClass=d.className,a.totalState=d.state},!0)}]),angular.module("newborn").directive("assessmentResults",["assessmentService","colorService",function(a,b){return{scope:{assessment:"=",score:"="},templateUrl:"./templates/assessmentResults.html",restrict:"E",replace:!0,controller:["$scope",function(c){c.getScoreClass=b.getScoreClass,c.assessmentLabels=a.assessments}]}}]),angular.module("newborn").directive("assessmentTable",["assessmentService","colorService",function(a,b){return{scope:{assessment:"="},templateUrl:"./templates/assessmentTable.html",replace:!0,restrict:"E",controller:["$scope",function(c){c.assessmentLabels=a.assessments,c.assessment=c.assessment||a.getDefaultAssessment(),c.getScoreClass=b.getScoreClass}],link:function(){}}}]),angular.module("newborn").directive("floatHeader",["$window",function(a){return{scope:{},template:"<header ng-transclude></header>",restrict:"E",replace:!0,transclude:!0,link:function(b,c){a.onscroll=function(){var a=40,b=window.pageYOffset||document.documentElement.scrollTop;b>=a?c.addClass("shrinked"):c.removeClass("shrinked")}}}}]),angular.module("newborn").directive("recommendationList",["assessmentService","colorService",function(a,b){return{scope:{scores:"=assessment"},restrict:"E",replace:!0,templateUrl:"./templates/recommendationList.html",controller:["$scope",function(c){c.recommendations=[{}],c.$watch("scores",function(b){c.recommendations=a.getRecommendations(b)},!0),c.getScoreClass=b.getScoreClass,c.myProp=1}],link:function(){}}}]),angular.module("newborn").factory("assessmentService",function(){function a(a){return _.pluck(a,"score").reduce(function(a,b){return a+b},0)}var b=[{type:"Центральная нервная система",typeShort:"ЦНС",labels:[[{text:"Нормальные рефелексы, нормальный тонус",recommendation:""}],[{text:"Мышечная гипотония",recommendation:"Патогенетическое лечение"},{text:"Гиподинамия",recommendation:"Патогенетическое лечение"},{text:"Гипорефлексия",recommendation:"Патогенетическое лечение"},{text:"Вялая реакция на осмотр",recommendation:"Патогенетическое лечение"}],[{text:"Отсутствие сознания",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Мышечная атония",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Адинамия",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"},{text:"Арефлексия",recommendation:"Патогенетическое лечение; проверить электролиты и глюкозу крови КЩС CITO"}]]},{type:"Дыхание",typeShort:"Д",labels:[[{text:"Обходится без кислорода",recommendation:""}],[{text:"Нуждается в кислороде через кислородную маску",recommendation:"Поставить кислородную маску"},{text:"Нуждается в кислороде через назальную канюлю",recommendation:"Поставить назальную канюлю"}],[{text:"Нуждается в ИВЛ",recommendation:"Подобрать параметры ИВЛ"},{text:"Нуждается в CPAP через назальные канюли",recommendation:"Подобрать параметры CPAP"},{text:"Находится на спонтанном дыхании с повышенным давлением на выдохе через интубационную трубку",recommendation:"Проводить ИВЛ через интубационную трубку мешком Амбу при отсутствии аппаратов ИВЛ и CPAP"}]]},{type:"Сердечно-сосудистая система",typeShort:"ССС",labels:[[{text:"Нормальные ЧСС и АД",recommendation:""}],[{text:"Умеренная тахикардия (160-170 уд./мин.)",recommendation:"Провести УЗИ сердца, ЭКГ"}],[{text:"Выраженная брадикардия (<100 уд./мин.)",recommendation:"Исключить обтурацию интубационной трубки; расширенная диагностическая программа (ОАК, УЗИ сердца, ЭКГ); возможно — реанимационные мероприятия"},{text:"Выраженная тахикардия (>170 уд./мин.)",recommendation:"Расширить диагностическую программу (обследовать на инфекции)"},{text:"Артериальная гипотония",recommendation:"Ввести вазотоники (допамин, норадреналин, адреналин); восстановить ОЦК"}]]},{type:"Печень",typeShort:"П",labels:[[{text:"Не увеличена",recommendation:""}],[{text:"Увеличена менее чем на 2 см",recommendation:"Провести УЗИ печени, печеночные пробы; патогенетическое лечение"}],[{text:"Увеличена более чем на 2 см",recommendation:"Провести УЗИ печени, печеночные пробы; патогенетическое лечение"}]]},{type:"Мочевыделительная система",typeShort:"МВС",labels:[[{text:"Нормальный почасовой диурез",recommendation:""}],[{text:"Олигоурия",recommendation:"Нормализовать ОЦК, АД; расширить диагностическую программу (ОАМ, УЗИ почек)"}],[{text:"Анурия",recommendation:"Катетеризация мочевого пузыря; инфузионная терапия для восстановления АД; улучшить почечный кровоток; расширить диагностическую программу (ОАМ, УЗИ почек)"},{text:"Гематурия",recommendation:"Инфузионная терапия; антибактериальная терапия; трансфузия препаратов крови; расширить диагностическую программу (ОАМ, исследование гемостаза, УЗИ почек)"}]]},{type:"Кожа",typeShort:"К",labels:[[{text:"Нормальная окраска кожи",recommendation:""}],[{text:"Умеренная бледность с периоральным и акроцианозом",recommendation:"Расширить диагностическую программу (ОАК, контроль АД); патогенетическое лечение"}],[{text:"Выраженная желтуха",recommendation:"Расширить диагностическую программу (ОАК, группа/резус, биохимический анализ крови, УЗИ печени); поставить лампу фототерапии или провести ЗПК"},{text:"Выраженная бледность",recommendation:"Расширить диагностическую программу (ОАК, группа/резус); восстановление ОЦК, возможно - трансфузия препаратов крови"},{text:"Цианоз",recommendation:"Расширить диагностическую программу (проверить проходимость носовых ходов, рентген органов грудной клетки, УЗИ сердца, НСГ); наладить адекватную оксигенацию"},{text:"Кровоизлияния диапедезного характера",recommendation:"Расширить диагностическую программу (ОАК, исследовать систему гемостаза); трансфузия препаратов крови; гемостатические препараты"}]]},{type:"Температура тела",typeShort:"T",labels:[[{text:"Норма (36,5 — 37,2°C)",recommendation:""}],[{text:"Умеренная гипотермия (36,0 — 36,4°C)",recommendation:"Положить в кювез или на стол лучистого тепла; принудительное пошаговое согревание (с разницей температуры тела и окружающей среды в 1,5°C); довести температуру до 36,6°C; перейти на сервоконтроль температуры ребенка"}],[{text:"Гипертермия (>37,2°C)",recommendation:"Выключить источник обогрева, распеленать ребенка; При t > 38°C - поставить жаропонижающие свечи с парацетамолом"},{text:"Выраженная гипотермия (<36,0°C)",recommendation:"Положить в кювез или на стол лучистого тепла; принудительное пошаговое согревание (с разницей температуры тела и окружающей среды в 1,5°C); довести температуру до 36,6°C; перейти на сервоконтроль температуры ребенка"}]]}],c=[{state:"Нормальное",className:"success"},{state:"Среднетяжелое",className:"info"},{state:"Среднетяжелое",className:"info"},{state:"Тяжелое",className:"primary"},{state:"Тяжелое",className:"primary"},{state:"Тяжелое",className:"primary"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Очень тяжелое",className:"massive-warning"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"},{state:"Крайне тяжелое",className:"massive-danger"}];return{assessments:b,states:c,getAssessmentScore:a,getRecommendations:function(a){var c=_(a).map(function(a){var c=a.selectedOption.split("_"),d=c[0],e=c[1],f=c[2];return{text:b[d].labels[e][f].recommendation,type:b[d].type,level:parseInt(e)}}).filter(function(a){return""!==a.text}).value();return c},getTransportingInfo:function(b){var c=a(b);return c>8?{level:2,text:"Не транспортабелен, снизить оценку до 8 баллов"}:c>0?{level:0,text:"Транспортабелен"}:{}},getDefaultAssessment:function(){return _(b).pluck("type").map(function(a,b){return{type:a,score:0,selectedOption:b+"_0_0"}}).value()},getState:function(b){var d=a(b);return c[d]}}}),angular.module("newborn").factory("colorService",function(){return{getScoreClass:function(a){return 0===a?"success":1===a?"warning":"danger"}}});